{"version":3,"sources":["./src/app/pages/service/service.page.html","./src/app/pages/service/service.module.ts","./src/app/pages/service/service.page.scss","./src/app/pages/service/service.page.ts"],"names":[],"mappings":"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","file":"pages-service-service-module-es5.js","sourcesContent":["module.exports = \"<ion-content class=\\\"container\\\" >\\r\\n  \\r\\n  <div class=\\\"content-page\\\">\\r\\n\\r\\n      <div class=\\\"header\\\">\\r\\n        {{ 'PAGES.SERVICE.TITLE' | translate }}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"toggle\\\">\\r\\n\\r\\n  <!--      <ion-item class=\\\"planning-toggle\\\">\\r\\n          <ion-label>{{ 'PAGES.SERVICE.TOGGLE.PLANNING' | translate }}</ion-label>\\r\\n          <ion-toggle color=\\\"medium\\\" (ionChange)=\\\"togglePlanning($event)\\\">\\r\\n          </ion-toggle>\\r\\n        </ion-item>\\r\\n\\r\\n        <div class=\\\"planning\\\" *ngIf=\\\"planningCheck\\\">\\r\\n          <app-africlean-calendar [action]=\\\"'planning'\\\"></app-africlean-calendar>\\r\\n          <br>\\r\\n        </div>-->\\r\\n\\r\\n          <!-- interventions -->\\r\\n          <div *ngIf=\\\"role !== 4\\\">\\r\\n              <ion-item class=\\\"comments-toggle\\\">\\r\\n                  <ion-label>{{ 'PAGES.INTERVENTION.TOGGLE.INTERVENTION' | translate }}</ion-label>\\r\\n                  <ion-toggle color=\\\"medium\\\" (ionChange)=\\\"toggleIntervention($event)\\\">\\r\\n                  </ion-toggle>\\r\\n              </ion-item>\\r\\n              <div class=\\\"comments\\\" *ngIf=\\\"interventionCheck\\\">\\r\\n                  <app-africlean-intervention-management [showAddFormuler]=\\\"showAddFormuler\\\">\\r\\n                  </app-africlean-intervention-management>\\r\\n              </div>\\r\\n          </div>\\r\\n\\r\\n\\r\\n\\r\\n          <!-- Planning pour les jours de passage -->\\r\\n          <ion-item class=\\\"planning-toggle\\\">\\r\\n              <ion-label>{{ 'PAGES.SERVICE.TOGGLE.PLANNING' | translate }}</ion-label>\\r\\n              <ion-toggle color=\\\"medium\\\" (ionChange)=\\\"togglePlanning($event)\\\">\\r\\n              </ion-toggle>\\r\\n          </ion-item>\\r\\n\\r\\n          <div class=\\\"planning\\\" *ngIf=\\\"planningCheck\\\">\\r\\n              <!-- <ion-list>\\r\\n                 <ion-item *ngFor=\\\"let planning of passageDays\\\">\\r\\n                   <ion-label>\\r\\n                     <h2>{{ planning.day }}</h2>\\r\\n                     <h3>{{ planning.time }}</h3>\\r\\n                   </ion-label>\\r\\n                 </ion-item>\\r\\n               </ion-list>-->\\r\\n              <app-africlean-calendar [action]=\\\"'planning'\\\"></app-africlean-calendar>\\r\\n              <br>\\r\\n          </div>\\r\\n\\r\\n          <!-- Les avis des personnes -->\\r\\n        <ion-item class=\\\"comments-toggle\\\">\\r\\n          <ion-label>{{ 'PAGES.SERVICE.TOGGLE.COMMENTS' | translate }}</ion-label>\\r\\n          <ion-toggle color=\\\"medium\\\" (ionChange)=\\\"toggleComments($event)\\\">\\r\\n          </ion-toggle>\\r\\n        </ion-item>\\r\\n\\r\\n        <div class=\\\"comments\\\" *ngIf=\\\"commentsCheck\\\"> \\r\\n          <africlean-comments></africlean-comments>\\r\\n        </div>\\r\\n\\r\\n      </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ServicePage } from './service.page';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ServicePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule.forChild(),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [ServicePage]\r\n})\r\nexport class ServicePageModule {}\r\n","module.exports = \".container .content-page {\\n  margin-top: 4vh;\\n}\\n.container .content-page .header {\\n  font-size: 1.4rem;\\n  margin-bottom: 2rem;\\n  padding-left: 0.5rem;\\n  border-bottom: 1px solid;\\n  border-color: var(--ion-color-grey);\\n  color: var(--ion-color-manage-passage);\\n}\\n.container .content-page .toggle .planning-toggle ion-label, .container .content-page .toggle .comments-toggle ion-label {\\n  color: var(--ion-color-manage-passage);\\n  font-weight: bold;\\n}\\n.container .content-page .toggle .planning ion-item ion-label h2 {\\n  color: var(--ion-color-manage-passage);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2VydmljZS9DOlxcVXNlcnNcXHRtZGlhbGxvXFxEb2N1bWVudHNcXERvY3VtZW50cyBwZXJzb1xcbWF1cmlDbGVhbi1mcm9udFxcbWF1cmlDbGVhbi1mcm9udC9zcmNcXGFwcFxccGFnZXNcXHNlcnZpY2VcXHNlcnZpY2UucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZXJ2aWNlL3NlcnZpY2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVJO0VBQ0ksZUFBQTtBQ0RSO0FER1E7RUFDSSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0Esb0JBQUE7RUFDQSx3QkFBQTtFQUNBLG1DQUFBO0VBQ0Esc0NBQUE7QUNEWjtBRFFnQjtFQUNJLHNDQUFBO0VBQ0EsaUJBQUE7QUNOcEI7QURld0I7RUFDSSxzQ0FBQTtBQ2I1QiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NlcnZpY2Uvc2VydmljZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVye1xyXG5cclxuICAgIC5jb250ZW50LXBhZ2V7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogNHZoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC5oZWFkZXJ7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS40cmVtO1xyXG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDAuNXJlbTtcclxuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO1xyXG4gICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWlvbi1jb2xvci1ncmV5KTtcclxuICAgICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tYW5hZ2UtcGFzc2FnZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAudG9nZ2xle1xyXG5cclxuICAgICAgICAgICAgLnBsYW5uaW5nLXRvZ2dsZSwgLmNvbW1lbnRzLXRvZ2dsZXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaW9uLWxhYmVse1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWFuYWdlLXBhc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAucGxhbm5pbmd7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlvbi1pdGVte1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpb24tbGFiZWx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGgye1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tYW5hZ2UtcGFzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLmNvbnRhaW5lciAuY29udGVudC1wYWdlIHtcbiAgbWFyZ2luLXRvcDogNHZoO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC5oZWFkZXIge1xuICBmb250LXNpemU6IDEuNHJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMnJlbTtcbiAgcGFkZGluZy1sZWZ0OiAwLjVyZW07XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItZ3JleSk7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWFuYWdlLXBhc3NhZ2UpO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC50b2dnbGUgLnBsYW5uaW5nLXRvZ2dsZSBpb24tbGFiZWwsIC5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAudG9nZ2xlIC5jb21tZW50cy10b2dnbGUgaW9uLWxhYmVsIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tYW5hZ2UtcGFzc2FnZSk7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuLmNvbnRhaW5lciAuY29udGVudC1wYWdlIC50b2dnbGUgLnBsYW5uaW5nIGlvbi1pdGVtIGlvbi1sYWJlbCBoMiB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWFuYWdlLXBhc3NhZ2UpO1xufSJdfQ== */\"","import {Component, Input, OnInit} from '@angular/core';\r\nimport {AfricleanSessionProvider} from '../../../providers/africlean-session/africlean-session.provider';\r\nimport {AfricleanHttpInterventionProvider} from \"../../../providers/africlean-http/africlean-http-intervention.provider\";\r\nimport {AfricleanObservablesProvider} from '../../../providers/africlean-observables/africlean-observables.provider';\r\n\r\n@Component({\r\n    selector: 'app-service',\r\n    templateUrl: './service.page.html',\r\n    styleUrls: ['./service.page.scss'],\r\n})\r\nexport class ServicePage implements OnInit {\r\n\r\n    public planning: string;\r\n\r\n    public comments: string;\r\n\r\n    public planningCheck = false;\r\n\r\n    public commentsCheck = false;\r\n\r\n    public interventionCheck = false;\r\n\r\n    public dashboardInterventionCheck = false;\r\n    public role: number;\r\n\r\n    /**\r\n     * numéro des pages\r\n     */\r\n    public positions = [];\r\n\r\n    /**\r\n     * Position de la page courante\r\n     */\r\n    @Input() public currentPage = 1;\r\n\r\n    /**\r\n     * Subscribes temporaires\r\n     */\r\n    public interventionsTmp: any[];\r\n    public interventions: any[];\r\n\r\n    /**\r\n     * La limite pour récuperer les données\r\n     */\r\n    public limit = 10;\r\n\r\n    /**\r\n     * Données à ignorer\r\n     */\r\n    public skip = 0;\r\n\r\n    /**\r\n     * Le nombre de clients par pages\r\n     */\r\n    @Input() public nbrInterventionsPerPage = 5;\r\n\r\n    public showAddFormuler = false;\r\n\r\n    constructor(private interventionProvider: AfricleanHttpInterventionProvider,\r\n                private session: AfricleanSessionProvider,\r\n                private observableProvider: AfricleanObservablesProvider) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        // Initialisation du role\r\n        this.session.getItem('role').then(\r\n            (role) => {\r\n                this.role = role;\r\n            }\r\n        );\r\n     /*   this.getInterventionsByFilter();\r\n        this.observableProvider.loadIntervention.subscribe(\r\n            (loadIncident) => {\r\n                if (loadIncident) {\r\n                    this.interventions = [];\r\n                    this.interventionsTmp = [];\r\n                    this.positions = [];\r\n                    this.limit = 10;\r\n                    this.skip = 0;\r\n                    this.showAddFormuler = false;\r\n                    this.getInterventionsByFilter();\r\n                }\r\n            });*/\r\n    }\r\n\r\n    /**\r\n     * Switch vers le planning\r\n     * @param event evenement\r\n     */\r\n    public togglePlanning(event: any) {\r\n        this.planningCheck = event.detail.checked;\r\n    }\r\n\r\n    /**\r\n     * Switch vers les commentaires\r\n     * @param event événement\r\n     */\r\n    public toggleComments(event: any) {\r\n        this.commentsCheck = event.detail.checked;\r\n    }\r\n\r\n\r\n    public toggleIntervention(event: any) {\r\n        this.interventionCheck = event.detail.checked;\r\n    }\r\n\r\n    public toggleDashboard(event: any) {\r\n        this.dashboardInterventionCheck = event.detail.checked;\r\n    }\r\n\r\n\r\n    sendPosition(position) {\r\n        this.currentPage = position;\r\n        if (position % 5 === 0 && !this.positions.includes(position)) {\r\n            this.positions.push(position);\r\n            this.skip = this.skip + this.limit;\r\n            this.getInterventionsByFilter();\r\n        }\r\n    }\r\n\r\n    private async getInterventionsByFilter() {\r\n        const userId = await this.session.getItem('userId');\r\n        const url = 'intervention/intervention-user-filter';\r\n        this.role = await this.session.getItem('role');\r\n        const body = {\r\n            limit: this.limit,\r\n            skip: this.skip,\r\n            userCode: userId,\r\n            role: this.role\r\n        };\r\n        this.interventionProvider.save(url, body).subscribe(\r\n            (interventions) => {\r\n\r\n                const interventionList = interventions.reverse();\r\n                if (!this.interventions && !this.interventionsTmp) {\r\n                    this.interventions = [];\r\n                    this.interventionsTmp = [];\r\n                    this.positions = [];\r\n                }\r\n                this.interventions = this.interventions.concat(interventionList.slice());\r\n                this.interventionsTmp = this.interventionsTmp.concat(interventionList.slice());\r\n            }\r\n        );\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}