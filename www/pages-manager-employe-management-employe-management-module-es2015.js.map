{"version":3,"sources":["./src/app/pages/manager/employe-management/employe-management.page.html","./src/app/pages/manager/employe-management/employe-management.module.ts","./src/app/pages/manager/employe-management/employe-management.page.scss","./src/app/pages/manager/employe-management/employe-management.page.ts"],"names":[],"mappings":"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","file":"pages-manager-employe-management-employe-management-module-es2015.js","sourcesContent":["module.exports = \"\\r\\n\\r\\n<ion-content class=\\\"container\\\">\\r\\n\\r\\n  <div  class=\\\"content-page\\\">\\r\\n\\r\\n    <div class=\\\"header\\\">\\r\\n      {{ 'PAGES.EMPLOYES_MANAGEMENT.TITLE' | translate }}\\r\\n    </div>\\r\\n\\r\\n    <!-- Afficher la liste des employes -->\\r\\n    <div>\\r\\n      <app-africlean-employe-manager\\r\\n              [employes]=\\\"employesTmp\\\"\\r\\n              [employesTmp]=\\\"employesTmp\\\"\\r\\n              [nbrEmployesPerPage]=\\\"nbrEmployesPerPage\\\"\\r\\n              [currentPage]=\\\"currentPage\\\"\\r\\n              (position)=\\\"sendPosition($event)\\\"></app-africlean-employe-manager>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\n\r\nimport { EmployeManagementPage } from './employe-management.page';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {TranslateModule} from '@ngx-translate/core';\r\nimport {ComponentsModule} from '../../../components/components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EmployeManagementPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes),\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [EmployeManagementPage]\r\n})\r\nexport class EmployeManagementPageModule {}\r\n","module.exports = \".container .content-page {\\n  margin-top: 14vh;\\n}\\n.container .content-page .header {\\n  font-size: 1.4rem;\\n  margin-bottom: 2rem;\\n  padding-left: 0.5rem;\\n  border-bottom: 1px solid;\\n  border-color: var(--ion-color-grey);\\n  color: var(--ion-color-employe-management);\\n}\\n.container .content-page .title {\\n  margin-top: 1rem;\\n  margin-bottom: 1rem;\\n  text-decoration: underline;\\n  width: -webkit-max-content;\\n  width: -moz-max-content;\\n  width: max-content;\\n  margin-right: auto;\\n  margin-left: auto;\\n  font-weight: bold;\\n  color: var(--ion-color-employe-management);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFuYWdlci9lbXBsb3llLW1hbmFnZW1lbnQvQzpcXFVzZXJzXFx0bWRpYWxsb1xcRG9jdW1lbnRzXFxEb2N1bWVudHMgcGVyc29cXG1hdXJpQ2xlYW4tZnJvbnRcXG1hdXJpQ2xlYW4tZnJvbnQvc3JjXFxhcHBcXHBhZ2VzXFxtYW5hZ2VyXFxlbXBsb3llLW1hbmFnZW1lbnRcXGVtcGxveWUtbWFuYWdlbWVudC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL21hbmFnZXIvZW1wbG95ZS1tYW5hZ2VtZW50L2VtcGxveWUtbWFuYWdlbWVudC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUU7RUFFRSxnQkFBQTtBQ0ZKO0FESUk7RUFDRSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0Esb0JBQUE7RUFDQSx3QkFBQTtFQUNBLG1DQUFBO0VBQ0EsMENBQUE7QUNGTjtBREtJO0VBQ0UsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLDBCQUFBO0VBQ0EsMEJBQUE7RUFBQSx1QkFBQTtFQUFBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsMENBQUE7QUNITiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21hbmFnZXIvZW1wbG95ZS1tYW5hZ2VtZW50L2VtcGxveWUtbWFuYWdlbWVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVye1xyXG5cclxuICAuY29udGVudC1wYWdle1xyXG5cclxuICAgIG1hcmdpbi10b3A6IDE0dmg7XHJcblxyXG4gICAgLmhlYWRlcntcclxuICAgICAgZm9udC1zaXplOiAxLjRyZW07XHJcbiAgICAgIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbiAgICAgIHBhZGRpbmctbGVmdDogMC41cmVtO1xyXG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XHJcbiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWdyZXkpO1xyXG4gICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWVtcGxveWUtbWFuYWdlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLnRpdGxlIHtcclxuICAgICAgbWFyZ2luLXRvcDogMXJlbTtcclxuICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgICAgIHdpZHRoOiBtYXgtY29udGVudDtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG4gICAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZW1wbG95ZS1tYW5hZ2VtZW50KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLmNvbnRhaW5lciAuY29udGVudC1wYWdlIHtcbiAgbWFyZ2luLXRvcDogMTR2aDtcbn1cbi5jb250YWluZXIgLmNvbnRlbnQtcGFnZSAuaGVhZGVyIHtcbiAgZm9udC1zaXplOiAxLjRyZW07XG4gIG1hcmdpbi1ib3R0b206IDJyZW07XG4gIHBhZGRpbmctbGVmdDogMC41cmVtO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWdyZXkpO1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWVtcGxveWUtbWFuYWdlbWVudCk7XG59XG4uY29udGFpbmVyIC5jb250ZW50LXBhZ2UgLnRpdGxlIHtcbiAgbWFyZ2luLXRvcDogMXJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gIHdpZHRoOiBtYXgtY29udGVudDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZW1wbG95ZS1tYW5hZ2VtZW50KTtcbn0iXX0= */\"","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {AfricleanHttpUserProvider} from '../../../../providers/africlean-http/africlean-http-user.provider';\r\nimport {AfricleanSessionProvider} from '../../../../providers/africlean-session/africlean-session.provider';\r\nimport {AfricleanObservablesProvider} from '../../../../providers/africlean-observables/africlean-observables.provider';\r\nimport {AfricleanConfigProvider} from '../../../../providers/africlean-config/africlean-config.provider';\r\n\r\n@Component({\r\n  selector: 'app-employe-management',\r\n  templateUrl: './employe-management.page.html',\r\n  styleUrls: ['./employe-management.page.scss'],\r\n})\r\nexport class EmployeManagementPage implements OnInit {\r\n\r\n  /**\r\n   * Liste des clients\r\n   */\r\n  public employes = [];\r\n  /**\r\n   * numéro des pages\r\n   */\r\n  public positions = [];\r\n\r\n  /**\r\n   * Position de la page courante\r\n   */\r\n  public currentPage = 1;\r\n\r\n  /**\r\n   * Annonces temporaires\r\n   */\r\n  public employesTmp = [];\r\n\r\n  /**\r\n   * La limite pour récuperer les données\r\n   */\r\n  public limit = 14;\r\n\r\n  /**\r\n   * Données à ignorer\r\n   */\r\n  public skip = 0;\r\n\r\n  /**\r\n   * Le nombre d'annonces par pages\r\n   */\r\n  public nbrEmployesPerPage = 7;\r\n  /**\r\n   * Test si la platforme est de type web\r\n   */\r\n  public isWeb: boolean;\r\n\r\n  @ViewChild('content', {static: true}) public content: any;\r\n  public user: any;\r\n\r\n  constructor(private userProvider: AfricleanHttpUserProvider,\r\n              private session: AfricleanSessionProvider,\r\n              private observableProvider: AfricleanObservablesProvider,\r\n              private config: AfricleanConfigProvider) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getEmplyeByFilter();\r\n    this.isWeb = this.config.isWeb();\r\n    this.observableProvider.loadClient.subscribe(\r\n        (load) => {\r\n          if (load) {\r\n            this.limit = 14;\r\n            this.skip = 0;\r\n            this.employes = [];\r\n            this.employesTmp = [];\r\n            this.positions = [];\r\n            this.getEmplyeByFilter();\r\n          }\r\n        });\r\n  }\r\n  /**\r\n   * Recupere la position de la page courante et permet de savoir si c'est un suivant\r\n   * donc il faut requeter de nouveau (multiple de 5) ou si c'est un precedent il ne faut\r\n   * rien faire dans ce cas\r\n   * @param position Position de la page\r\n   */\r\n  sendPosition(position) {\r\n    this.currentPage = position;\r\n    if (position % 2 === 0 && !this.positions.includes(position)) {\r\n      this.positions.push(position);\r\n      this.skip = this.skip + this.limit;\r\n      this.getEmplyeByFilter();\r\n    }\r\n  }\r\n\r\n  private async getEmplyeByFilter() {\r\n    let body: any = {};\r\n    this.user = await this.session.getItem('user');\r\n    const entity = (this.user) ? this.user.entity : null;\r\n    body = {\r\n      entity\r\n    };\r\n    this.userProvider.save('user/employe/entity', body).subscribe(\r\n        (employes) => {\r\n          if (!this.employes && !this.employesTmp) {\r\n            this.employes = [];\r\n            this.employesTmp = [];\r\n            this.positions = [];\r\n          }\r\n          this.employes = this.employes.concat(employes.slice());\r\n          this.employesTmp = this.employesTmp.concat(employes.slice());\r\n        }\r\n    );\r\n  }\r\n\r\n  private getEmplyes() {\r\n    const url = 'user/employe/';\r\n    this.userProvider.getAll(url).subscribe(\r\n        (employes) => {\r\n          if (!this.employes && !this.employesTmp) {\r\n            this.employes = [];\r\n            this.employesTmp = [];\r\n            this.positions = [];\r\n          }\r\n          this.employes = this.employes.concat(employes.slice());\r\n          this.employesTmp = this.employesTmp.concat(employes.slice());\r\n        }\r\n    );\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}